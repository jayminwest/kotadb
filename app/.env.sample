# KotaDB environment template.
# Copy to .env and update values before running automation.

# ADW automation secrets now live in adws/.env (see adws/.env.sample).

# Bun/TypeScript service configuration
PORT=3000
KOTA_GIT_BASE_URL=https://github.com

# Indexer Configuration
# Number of files to process in a single database transaction during indexing
# Larger batches: Fewer database calls but higher timeout risk
# Smaller batches: More overhead but better progress granularity
# Default: 50 (prevents statement timeouts for large repositories with 200+ files)
INDEXER_BATCH_SIZE=50

# Supabase Database Configuration
# Get these values from: https://supabase.com/dashboard → Project Settings → API
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_KEY=your-service-role-key-here

# Supabase Native Postgres Connection (for pg-boss job queue)
# Local development (Supabase Local): postgresql://postgres:postgres@localhost:5434/postgres
# Production (Supabase Cloud): postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres
SUPABASE_DB_URL=postgresql://postgres:postgres@localhost:5434/postgres

# GitHub App Configuration (for private repository access)
# Get these from: https://github.com/settings/apps → Your App → General
# App ID: Numeric ID from app settings page
# Private Key: Generate and download from app settings (PEM format, multiline)
GITHUB_APP_ID=your-app-id-here
GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nYour private key here\n-----END RSA PRIVATE KEY-----"

# GitHub Webhook Configuration (for automated repository indexing)
# Get this from: https://github.com/settings/apps → Your App → Webhooks
# Webhook Secret: Generate random secret (minimum 16 characters recommended)
# Example: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=your-webhook-secret-here

# Automation runtime configuration
ADW_ENV=local
ADW_LOG_ROOT=.adw_logs
ADW_RUNNER_IMAGE=kotadb-adw-runner:latest
ADW_GIT_REF=main
ADW_REPO_URL=
ADW_RUNNER_AUTO_PULL=true
ADW_DOCKER_BIN=docker
ADW_CONTAINER_LOG_PATH=/app/.adw_logs
ADW_HOST_LOG_PATH=/absolute/path/to/your/kotadb/.adw_logs
