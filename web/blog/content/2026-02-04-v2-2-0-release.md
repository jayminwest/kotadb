---
title: "KotaDB v2.2.0: Unified Search, Memory Layer, and Web Expert Domain"
description: "Major intelligence improvements with cross-session learning, unified search, and expanded expert domains"
author: "KotaDB Team"
date: "2026-02-04"
tags: ["release", "memory-layer", "unified-search", "expert-domains", "intelligence"]
image: "/blog/images/v2-2-0-release.jpg"
---

# KotaDB v2.2.0: Unified Search, Memory Layer, and Web Expert Domain

We're excited to announce KotaDB v2.2.0, our biggest intelligence upgrade yet. This release introduces persistent cross-session learning, unified search capabilities, and expanded expert domains that make your code intelligence truly intelligent.

## üß† Memory Layer: Cross-Session Intelligence

The headline feature of v2.2.0 is the **Memory Layer** - a persistent intelligence system that enables agents to learn from past decisions, avoid repeating mistakes, and follow established patterns across sessions.

### What This Means

- **Decisions persist**: Architectural decisions are stored and searchable across sessions
- **Learn from failures**: Failed approaches are recorded to prevent repetition
- **Pattern recognition**: Codebase patterns are discovered and maintained automatically
- **Session insights**: Each agent session contributes to the collective knowledge

### In Practice

```json
// Record a decision for future reference
{
  "tool": "record_decision",
  "parameters": {
    "title": "Use SQLite for local storage",
    "context": "Need persistent storage without external dependencies",
    "decision": "Use SQLite with FTS5 for embedded database and search",
    "rationale": "Zero configuration, excellent performance, full-text search built-in"
  }
}

// Later sessions can search and learn from this decision
{
  "tool": "search_decisions",
  "parameters": {
    "query": "database choice local storage"
  }
}
```

The Memory Layer includes five new MCP tools:
- `search_decisions` / `record_decision`
- `search_failures` / `record_failure`
- `search_patterns`
- `record_insight`
- `get_recent_patterns`

All data is stored locally in SQLite with FTS5 full-text search for fast, semantic retrieval.

## üîç Unified Search: One Tool, All Knowledge

The new **Unified Search Tool** (`search_unified`) consolidates multiple search operations into a single, intelligent interface that automatically determines the best search strategy.

### Before v2.2.0
```javascript
// Multiple tool calls required
await searchCode("auth middleware");
await searchPatterns("auth");
await searchDecisions("authentication");
await searchFailures("auth problems");
```

### After v2.2.0
```javascript
// Single unified call
await searchUnified("auth middleware");
```

The unified search:
- **Analyzes query intent** automatically
- **Routes to appropriate search methods** (code, patterns, decisions, failures)
- **Combines and ranks results** by relevance
- **Provides search suggestions** for better results

## üéõÔ∏è CLI --toolset Flag: Focused Workflows

The new `--toolset` flag allows you to filter MCP tools by category, creating focused workflows:

```bash
# Code review workflow
bunx kotadb --stdio --toolset analysis,memory

# Refactoring workflow
bunx kotadb --stdio --toolset search,context,memory

# Database development
bunx kotadb --stdio --toolset database,memory
```

Available toolsets:
- `search`, `index`, `analysis`, `memory`, `sync`, `context`
- `database`, `api`, `testing`, `indexer`, `automation`
- `minimal`, `full`, `debug`

Create custom toolsets in `.kotadb/toolsets.json` for team-specific workflows.

## üåê Web Expert Domain: Complete Coverage

We've added the **Web Expert Domain** to our expert system, bringing us to **ten specialized domains**:

| Domain | Purpose |
|--------|---------|
| `web` | **NEW** - Web content, design system, marketing site |
| `claude-config` | .claude/ configuration |
| `agent-authoring` | Agent creation and registry |
| `database` | SQLite schema and migrations |
| `api` | HTTP endpoints and MCP tools |
| `testing` | Test patterns and antimocking |
| `indexer` | AST parsing and symbol extraction |
| `github` | Issues, PRs, and workflows |
| `automation` | ADW workflows and orchestration |
| `documentation` | Content management and organization |

The web domain handles:
- Marketing website development
- Documentation site management
- Design system maintenance
- SEO optimization
- Performance improvements

## üìà Intelligence Evolution

### Dynamic Expertise Layer

The expertise system now validates and synchronizes patterns from actual code:

- `get_domain_key_files` - Discover the most-depended-on files per domain
- `validate_expertise` - Check expertise definitions against indexed code
- `sync_expertise` - Keep expertise patterns current with codebase reality

### Context Seeding Performance

Context generation now targets **<100ms response time** for real-time context injection:

- Dependency analysis for files being modified
- Related test file discovery
- Recent change tracking
- Impact assessment for planned changes

## üöÄ Performance and Quality

### Memory Layer Performance
- **FTS5 full-text search** across all memory tables
- **<50ms query response time** for typical searches
- **Concurrent access** with SQLite WAL mode
- **Automatic cleanup** with configurable retention policies

### Search Improvements
- **Parallel search execution** across multiple search types
- **Smart result ranking** by relevance and recency
- **Query expansion** with related terms
- **Session-aware context** for better results

### Toolset Performance
- **Faster startup time** with filtered tool loading
- **Reduced memory usage** with smaller tool registries
- **Cleaner interfaces** with focused tool lists

## üìñ Documentation Overhaul

We've completely updated our documentation for v2.2.0:

### New Guides
- [Memory Layer Guide](../docs/memory-layer-guide.md) - Complete guide to cross-session intelligence
- [Unified Search Guide](../docs/unified-search-guide.md) - Master the new search capabilities
- [CLI Toolset Guide](../docs/cli-toolset-guide.md) - Focused workflows with tool filtering
- [Web Expert Domain](../docs/web-expert-domain.md) - Web development with KotaDB

### Updated Content
- All documentation now references **v2.2.0**
- Standardized database paths to `.kotadb/kota.db`
- Updated CLAUDE.md with new expert domains and tools
- Fixed broken internal links and improved cross-references

## üîß Migration Guide

### From v2.1.x

The Memory Layer is **automatically activated** - no configuration required. Your existing workflows continue to work unchanged.

**New capabilities available immediately:**
```bash
# Search past decisions
bunx kotadb search-decisions "database migration"

# Use unified search
bunx kotadb search-unified "authentication patterns"

# Filter tools by category
bunx kotadb --stdio --toolset search,memory
```

**Optional enhancements:**
- Set up hooks for automatic memory recording
- Configure custom toolsets for your workflows
- Explore web domain for documentation site improvements

### Memory Data

All memory data is stored locally in your existing `.kotadb/kota.db` database. The memory layer tables are created automatically on first use.

## üîí Privacy and Local-First

As always, **everything runs locally**:

- Memory data stored in your local SQLite database
- No cloud sync or external dependencies
- Full control over your data and decisions
- Export/import for team sharing when desired

## üéØ What's Next

v2.2.0 establishes the foundation for truly intelligent code assistance. Future releases will build on the Memory Layer with:

- **Adaptive workflows** that learn from your patterns
- **Team intelligence** sharing curated decisions and patterns
- **Predictive assistance** suggesting relevant context automatically
- **Advanced reasoning** connecting decisions across projects

## ‚ö° Get Started

### Install or Update
```bash
npm install -g kotadb@latest
# or
bun install -g kotadb@latest
```

### Explore New Features
```bash
# Try unified search
bunx kotadb search-unified "your query here"

# Start with memory tools
bunx kotadb --stdio --toolset memory

# Check your current version
bunx kotadb --version
```

### Learn More
- [Memory Layer Guide](../docs/memory-layer-guide.md)
- [Unified Search Guide](../docs/unified-search-guide.md)
- [CLI Toolset Guide](../docs/cli-toolset-guide.md)
- [Complete API Reference](../docs/content/api-reference.md)

## üôè Thank You

Special thanks to our community for the feedback that shaped v2.2.0. The Memory Layer concept emerged directly from user requests for "smarter" code assistance that learns from experience.

**Try KotaDB v2.2.0 today and experience truly intelligent code assistance that gets smarter with every session.**

---

*KotaDB v2.2.0 is available now. As always, everything runs locally on your machine with no cloud dependencies.*